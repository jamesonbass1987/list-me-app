<!--  Listing Heading -->
<%= tag.h2(@listing.title, :class => 'heading-text') %>
<%= tag.text(@listing.location.full_location_name) %> <%= tag(:br) %>

<!-- Listing image carousel -->
<%= content_tag(:div, :class => "carousel img-responsive") do %>
  <%= content_tag(:div, :class => "carousel slide", :id => "listingCarousel", :'data-ride' => 'carousel') do %>
    <%= content_tag(:div, :class => "carousel-inner") do %>
      <%= render @listing.listing_images %>
    <% end %>
    <%= content_tag(:div, :class => "carousel-controls") do %>
      <%= link_to "#listingCarousel", class: "carousel-control-prev carousel-buttons", role: "button", 'data-slide': 'prev' do  %>
         <%= tag.span("", :class => 'carousel-control-prev-icon', :'aria-hidden' => 'true') %>
         <%= tag.span('Previous', :class => 'sr-only') %>
      <% end %>
      <%= link_to "#listingCarousel", class: "carousel-control-next carousel-buttons", role: "button", 'data-slide': 'next' do  %>
         <%= tag.span("", :class => 'carousel-control-next-icon', :'aria-hidden' => 'true') %>
         <%= tag.span('Next', :class => 'sr-only') %>
      <% end %>
    <% end %>
  <% end %>
<% end %>

<!-- Listing Information-->
<%= tag.h3('Description:', class: 'heading-text') %>
<%= tag.p(@listing.description) %>

<%= tag.strong('Price:') %> <%= tag.text(number_to_currency(@listing.price)) %> <%= tag(:br) %>
<%= tag.strong('Category:') %> <%= tag.text(@listing.category.name) %> <%= tag(:br) %>
<%= tag.strong('Tags:') %> <%= tag.text(@listing.tags.collect{|tag| tag.name}.join(", ")) %><%= tag(:br) %>
<%= tag.strong('Posted By:') %> <%= tag.text(link_to @listing.user.username, user_path(@listing.user)) %> <%= tag.text(display_user_rating(@listing.user)) %><%= tag(:br) %>

<!-- Listing Actions -->
<%= mail_to @listing.user.email, 'Contact Seller', html_options = {class: 'btn btn-outline-primary btn-block'} %>
<%= delete_edit_listing_links(@listing) %>

<!-- Listing Comments Section -->
<%= tag.h3('Comments:', class: 'heading-text') %>
<%= content_tag(:div, nil, id: 'js-listing-comments') %>
<!-- <%= display_listing_comments(@listing.comments) %>
<%= display_comment_form_heading %>
<%= display_listing_comment_form(@comment) %> -->


<script id="comment-template" type="text/comment-template">
  <div class="border border-top-0 border-right-0 comment-border comment-box">
    <div class="media">
      <img src="{{owner_profile_image_url}}" alt="Profile Image" class="align-self-center mr-3 profile-image-small rounded-circle">
      <div class="media-body">
        <h6 class="mt-0">Posted at {{created_at}} by {{owner_username}}</h6>
        <div>
          {{content}}
        </div>
        <div>
          {{status}}
        </div>
        <div>
          {{owner_controls}}
        </div>
        <div>
          {{reply_controls}}
        </div>
      </div>
    </div>
  </div>
</script>
